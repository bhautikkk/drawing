<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Draw & Guess</title>
    <link rel="stylesheet" href="style.css">
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js" defer></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-63KVS5WP89"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-63KVS5WP89');
    </script>
    <!-- Google AdSense Verification -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5830762088139920"
        crossorigin="anonymous"></script>
</head>

<body>

    <!-- Main Menu -->
    <div id="main-menu" class="screen active">
        <div class="menu-content">
            <h1>Draw & Guess</h1>
            <p>Free Multiplayer Drawing Game</p>

            <div class="name-section">
                <input type="text" id="username-input" placeholder="Enter Your Name" maxlength="12">
            </div>

            <div class="create-section">
                <div class="settings-row">
                    <div class="setting-item">
                        <label for="hint-toggle" class="setting-label">Hints</label>
                        <select id="hint-toggle" class="setting-input">
                            <option value="true">On</option>
                            <option value="false">Off</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="rounds-input" class="setting-label">Rounds</label>
                        <input type="number" id="rounds-input" value="5" min="1" max="10" class="setting-input"
                            oninput="if(parseInt(this.value)>10) this.value=10; if(this.value.length>2) this.value=this.value.slice(0,2);">
                    </div>
                    <div class="setting-item">
                        <label for="players-input" class="setting-label">Max Players</label>
                        <input type="number" id="players-input" value="8" min="2" max="10" class="setting-input"
                            oninput="if(parseInt(this.value)>10) this.value=10; if(this.value.length>2) this.value=this.value.slice(0,2);">
                    </div>
                    <div class="setting-item">
                        <label for="time-input" class="setting-label">Draw Time (sec)</label>
                        <select id="time-input" class="setting-input">
                            <option value="60">60s (1 min)</option>
                            <option value="120">120s (2 min)</option>
                            <option value="180">180s (3 min)</option>
                            <option value="240">240s (4 min)</option>
                            <option value="300">300s (5 min)</option>
                        </select>
                    </div>
                </div>

                <button id="create-room-btn"
                    style="width: 100%; background: #27ae60; padding: 15px; font-size: 1.1rem;">Create Room</button>
            </div>

            <div class="join-section">
                <h3>Join Room</h3>
                <button id="quick-join-btn"
                    style="width: 100%; background: #f39c12; margin-bottom: 15px; padding: 12px; font-weight: bold; color: white; border: none; border-radius: 8px; cursor: pointer;">‚ö°
                    Quick Join Public Game</button>
                <div style="display: flex; gap: 5px;">
                    <input type="number" id="room-code-input" placeholder="Enter Code" style="flex: 1; margin: 0;">
                    <button id="join-btn" style="margin: 0; width: 80px;">Join</button>
                </div>
            </div>
            <p id="menu-error" class="error-msg"></p>
        </div>
    </div>

    <!-- Lobby / Waiting Screen -->
    <div id="lobby-screen" class="screen">
        <div class="lobby-content">
            <h2>Waiting for players...</h2>
            <div class="code-display">
                <span id="room-code-display">------</span>
                <button id="copy-code-btn">Copy</button>
            </div>
            <p>Share this code with your friends!</p>
            <p id="player-count">Players: 1/2</p>
            <div id="lobby-player-list" class="lobby-list"></div>
            <button id="start-game-btn" class="hidden" style="margin-top: 20px; background: #27ae60;">Start Game
                Now</button>

            <!-- AD PLACEHOLDER (LOBBY) -->
            <div class="ad-slot" id="ad-lobby">
                <p>Advertisement Space</p>
                <!-- Paste your AdSense code here later -->
            </div>
        </div>
        <!-- AD PLACEHOLDER (LOBBY) -->
        <div class="ad-slot" id="ad-lobby">
            <p>Advertisement Space</p>
            <!-- Paste your AdSense code here later -->
        </div>
    </div>
    </div>

    <!-- Create Room Type Overlay -->
    <div id="creation-overlay" class="overlay-screen hidden">
        <div class="menu-content" style="z-index: 2000;">
            <h2>Select Room Type</h2>
            <p>Choose who can join your game</p>
            <div style="margin-top: 20px;">
                <button id="create-public-btn" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                    üåç Create Public Room
                </button>
                <button id="create-private-btn" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
                    üîí Create Private Room
                </button>
                <button id="cancel-creation-btn" style="background: #e74c3c; margin-top: 10px;">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Finding Room Overlay (Quick Join) -->
    <div id="finding-room-overlay" class="overlay-screen hidden">
        <div class="menu-content" style="z-index: 2000;">
            <h2 style="color: white; margin-bottom: 15px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">Finding a public game
                for
                you...</h2>

            <div class="spinner" style="margin: 20px auto;"></div>

            <!-- AD PLACEHOLDER (FINDING) -->
            <div class="ad-slot" id="ad-finding" style="margin: 20px auto; height: 250px; background: rgba(0,0,0,0.2);">
                <!-- Ad will be injected here -->
            </div>

            <p id="finding-status">Please wait...</p>
        </div>
    </div>

    <!-- Reconnecting Overlay -->
    <div id="reconnecting-overlay" class="overlay-screen hidden" style="z-index: 3000; background: rgba(0,0,0,0.85);">
        <div class="menu-content">
            <h2 style="color: #e74c3c;">Connection Lost</h2>
            <div class="spinner" style="border-top-color: #e74c3c; margin: 20px auto;"></div>
            <p>Reconnecting to server...</p>
        </div>
    </div>

    <!-- Status Message Overlay (Generic) -->
    <div id="status-overlay" class="overlay-screen hidden" style="z-index: 2900;">
        <div class="menu-content">
            <h2 id="status-title">Notice</h2>
            <p id="status-message">Something happened.</p>
            <button id="status-ok-btn" style="margin-top:20px; background:#3498db;">OK</button>
        </div>
    </div>

    <!-- Empty Room Overlay (All Players Left) -->
    <div id="empty-room-overlay" class="overlay-screen hidden" style="z-index: 2900;">
        <div class="menu-content">
            <h2>Everyone left! üò¢</h2>
            <p>You are the only one here.</p>
            <button id="empty-home-btn" style="width: 100%; background: #95a5a6; margin-top: 20px;">Return Home</button>
            <button id="empty-join-btn" style="width: 100%; background: #f39c12; margin-top: 10px;">‚ö° Find New
                Game</button>
        </div>
    </div>

    <!-- Drawing Screen -->
    <div id="drawing-screen" class="screen">
        <!-- Game Header: Timer, Word, Round Info -->
        <div id="game-header">
            <div id="timer-container">
                <div class="timer-icon">‚è∞</div>
                <div id="timer">60</div>
            </div>
            <div id="word-container">
                <div id="word-display">_ _ _ _ _</div>
            </div>
            <div id="round-info">Round 1/3</div>
        </div>

        <!-- Main Game Area -->
        <div id="game-container">
            <!-- Left: Players -->
            <div id="players-sidebar">
                <!-- Players will be injected here -->
            </div>

            <!-- Center: Canvas -->
            <div id="canvas-area">
                <div id="overlay-container">
                    <!-- Overlays for Word Selection, Game End, etc -->
                    <div id="word-selection-overlay" class="overlay hidden">
                        <h3>Choose a Word</h3>
                        <div id="word-options" class="options-grid">
                            <!-- Buttons injected by JS -->
                        </div>
                    </div>
                    <div id="game-over-overlay" class="overlay hidden">
                        <h3>Game Over!</h3>
                        <div id="podium">
                            <!-- Winner info -->
                        </div>

                        <!-- AD PLACEHOLDER (GAME OVER) -->
                        <div class="ad-slot" id="ad-gameover" style="margin: 20px auto;">
                            <p>Advertisement Space</p>
                            <!-- Paste your AdSense code here later -->
                        </div>

                        <button id="return-home-btn">Return to Home</button>
                    </div>
                </div>

                <canvas id="drawing-canvas"></canvas>

                <!-- Floating Toolbar (bottom of canvas) -->
                <div id="drawing-tools" class="tools-container">
                    <div class="tool-group">
                        <div class="color-wrapper">
                            <button id="current-color-btn" class="tool-btn color-btn"></button>
                        </div>
                    </div>
                    <div class="tool-group">
                        <input type="range" id="brush-size" min="1" max="40" value="5">
                    </div>
                    <div class="tool-group">
                        <button id="undo-btn" class="tool-btn">‚Ü©</button>
                        <button id="eraser-btn" class="tool-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path
                                    d="M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 .707-.293l-1.414-1.414A2 2 0 0 0 2.586 17.414z">
                                </path>
                                <path d="M16.5 2.5a2.121 2.121 0 0 1 3 3L7 18l-3-3L16.5 2.5z"></path>
                            </svg>
                        </button>
                        <button id="clear-btn" class="tool-btn">üóë</button>
                    </div>
                </div>
            </div>

            <!-- Right: Chat -->
            <div id="chat-sidebar">
                <div id="chat-messages"></div>
                <div id="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Type your guess here..." autocomplete="off">
                </div>
            </div>
        </div>
    </div>



    <div id="color-palette" class="palette hidden">
        <div class="color-option" style="background-color: #000000;" data-color="#000000"></div>
        <div class="color-option" style="background-color: #7f7f7f;" data-color="#7f7f7f"></div>
        <div class="color-option" style="background-color: #880015;" data-color="#880015"></div>
        <div class="color-option" style="background-color: #ed1c24;" data-color="#ed1c24"></div>
        <div class="color-option" style="background-color: #ff7f27;" data-color="#ff7f27"></div>
        <div class="color-option" style="background-color: #fff200;" data-color="#fff200"></div>
        <div class="color-option" style="background-color: #22b14c;" data-color="#22b14c"></div>
        <div class="color-option" style="background-color: #00a2e8;" data-color="#00a2e8"></div>
        <div class="color-option" style="background-color: #3f48cc;" data-color="#3f48cc"></div>
        <div class="color-option" style="background-color: #a349a4;" data-color="#a349a4"></div>
        <div class="color-option" style="background-color: #ffffff;" data-color="#ffffff"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>

</html>